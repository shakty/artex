<!doctype html>
<title>Instructions Reminder</title>
<link rel="stylesheet" href="/lib/bootstrap/bootstrap.min.css" />

<!-- JQUERY UI STARTS -->
<link type="text/css" href="js/jqueryui/css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="Stylesheet" />
<script src="js/jqueryui/js/jquery-1.7.2.min.js" charset="utf-8"></script>
<script src="js/jqueryui/js/jquery-ui-1.8.20.custom.min.js" charset="utf-8"></script>
<!-- JQUERY UI ENDS -->

<link rel="stylesheet" type="text/css" href="css/iframe.css">
<link rel="stylesheet" type="text/css" href="css/instructions.css">
<body>

  <div id="container_instructions">

    <h1>Instructions Summary</h1>
    <div id="instructions">
      Game starts in <span id="game-starts-in"></span> seconds.
      <ul>

        <li>
          You are part of a community
          of <strong id="ng_replace_pcount"><em>(still counting... wait
          a few seconds)</em></strong> painters (including you). You
          will play the role of both the <em>artist</em> and
          the <em>art critic</em>.
        </li>
        <li>
          The game is repeated for <strong id="ng_replace_repeat"></strong>
          rounds.
        </li>
        <li>
          In each round you will: (i) create a new painting, (ii)
          choose one of the <strong>3</strong> available exhibitions
          for your artwork, and (iii) review the <strong>3</strong>
          paintings you have been <span id="review-rule-random">randomly</span>
          assigned to.
          <span
        </li>

        <li id="tournament-summary" style="display: none">
            Each exhibition displays a <em>limited</em> number of
        paintings<span id="ng_replace_pubrule_text_tournament"></span>. That
        is:</li>

        <li id="threshold-summary" style="display: none">
            Each exhibition displays <em>only</em>
        paintings with an average review score greater than a
        threshold<span id="ng_replace_pubrule_text_threshold"></span>.
        That is:</li>

        <table id="payoff">

            <thead>
                <tr>
                    <th>Exhibition</th>
                    <th id="table-award-threshold">Number of Awards</th>
                    <th>Reward Points</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td><strong>A</strong></td>
                    <td><em id="ng_replace_threshold_A"></em></td>
                    <td><em id="ng_replace_award_A"></em></td>
                </tr>

                <tr>
                    <td><strong>B</strong></td>
                    <td><em id="ng_replace_threshold_B"></em></td>
                    <td><em id="ng_replace_award_B"></em></td>
                </tr>

                <tr>
                    <td><strong>C</strong></td>
                    <td><em id="ng_replace_threshold_C"></em></td>
                    <td><em id="ng_replace_award_C"></em></td>
                </tr>
            </tbody>

        </table>

      </ul>
    </div>
  </div>
</body>
<script type="text/javascript">
    $(document).ready(function() {
        var node, W, J, s;
        var a, b, c;
        var startsIn;
        node = parent.node;
        J = parent.J;
        W = parent.W;
        s = node.game.settings;

        // If available, set it. Otherwise will be set upon arrival of msg.
        if (node.game.pcount) {
            W.setInnerHTML('ng_replace_pcount', node.game.pcount);
        }

        // Display time left middle of page.
        startsIn = W.getElementById('game-starts-in');
        startsIn.innerHTML = Math.floor(s.TIMER.instr_summary/1000);
        node.game.visualTimer.gameTimer.addHook({
            hook: function() {
                startsIn.innerHTML = Math.floor(this.timeLeft/1000);
            },
            ctx: node.game.visualTimer.gameTimer,
            name: 'extraTimer'
        });

        // Fill in parameters.
        W.setInnerHTML('ng_replace_repeat', s.REPEAT);

        W.setInnerHTML('ng_replace_award_A', s.exA.reward);
        W.setInnerHTML('ng_replace_award_B', s.exB.reward);
        W.setInnerHTML('ng_replace_award_C', s.exC.reward);

        W.setInnerHTML('ng_replace_award_A', s.exA.reward);
        W.setInnerHTML('ng_replace_award_B', s.exB.reward);
        W.setInnerHTML('ng_replace_award_C', s.exC.reward);

        if (s.competition === 'tournament') {
            W.show('tournament-summary');

            W.setInnerHTML('ng_replace_pubrule_text_tournament', s.pubrule_text);


            a = s.exA.N;
            b = s.exB.N;
            c = s.exC.N;
            W.setInnerHTML('ng_replace_threshold_A', a);
            W.setInnerHTML('ng_replace_threshold_B', b);
            W.setInnerHTML('ng_replace_threshold_C', c);

            // W.setInnerHTML('ng_replace_threshold', s.exA.N);
            // W.setInnerHTML('ng_replace_award', s.exA.reward);
        }
        else {
            W.show('threshold-summary');

            // Fill in parameters.
            W.setInnerHTML('table-award-threshold', 'Threshold for Display');
            W.setInnerHTML('ng_replace_pubrule_text_threshold', s.pubrule_text);

            a = s.exA.threshold;
            b = s.exB.threshold;
            c = s.exC.threshold;

            W.setInnerHTML('ng_replace_threshold_A', makeThreshold(a));
            W.setInnerHTML('ng_replace_threshold_B', makeThreshold(b));
            W.setInnerHTML('ng_replace_threshold_C', makeThreshold(c));
            // W.setInnerHTML('ng_replace_threshold', s.exA.N);
            // W.setInnerHTML('ng_replace_award', s.exA.reward);
        }

        function makeThreshold(n) {
            if (J.isInt(n)) n += '.0';
            return '&gt;' + n;
        }

    });
</script>
